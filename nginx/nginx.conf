events {}

http {
    upstream nodejs {
        server nodejs_app1:3000;
        server nodejs_app2:3000;

    }

    server {
        listen 8080;  # Listen on port 8080

        location / {
            proxy_pass http://nodejs;  # Routes traffic to the Node.js server group
        }

        location /metrics {
            stub_status;
        }

        listen 443 ssl;
        ssl_certificate /etc/nginx/certs/cert.pem;
        ssl_certificate_key /etc/nginx/certs/key.pem;
    }
}
